<!doctype html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>Diva ‚ù§Ô∏è</title>

<style>
body{
  margin:0;
  height:100vh;
  display:flex;
  align-items:center;
  justify-content:center;
  font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
  background: linear-gradient(135deg, #fde2e4, #fff);
  overflow:hidden;
}

.slideshow{
  position:fixed;
  inset:0;
  z-index:0;
  display:none;
}
.slide{
  position:absolute;
  inset:0;
  background-size:cover;
  background-position:center;
  opacity:0;
  transition:opacity 2s ease-in-out;
  filter:brightness(.85);
}
.slide.active{ opacity:1; }

.card{
  position:relative;
  z-index:2;
  width:min(520px, 92vw);
  background:white;
  padding:36px;
  border-radius:22px;
  box-shadow:0 15px 40px rgba(0,0,0,.15);
  text-align:center;
  transition: opacity 1.2s ease;
}

h1{ margin:0 0 12px; font-size:28px; }
p{ margin:0 0 22px; font-size:17px; opacity:.85; }

.btns{
  display:flex;
  gap:14px;
  justify-content:center;
}

button{
  border:0;
  padding:12px 22px;
  border-radius:14px;
  font-size:16px;
  cursor:pointer;
  box-shadow:0 6px 16px rgba(0,0,0,.15);
}

#yes{ background:#ff4d6d; color:white; }
#no{ background:#f2f2f2; }

#msg{
  margin-top:16px;
  font-size:18px;
  font-weight:600;
  display:none;
}

/* show a tiny test player so you can confirm file loads */
.test-audio{
  margin-top:14px;
  display:flex;
  flex-direction:column;
  gap:8px;
  align-items:center;
  font-size:13px;
  opacity:.85;
}
.test-audio a{ color:#ff4d6d; text-decoration:none; font-weight:600; }

.final-line{
  position:fixed;
  inset:0;
  display:flex;
  align-items:center;
  justify-content:center;
  font-size:32px;
  font-weight:700;
  color:white;
  text-align:center;
  opacity:0;
  transition:opacity 2.5s ease;
  z-index:3;
  text-shadow:0 6px 26px rgba(0,0,0,.65);
  pointer-events:none;
}
</style>
</head>

<body>

<div class="slideshow" id="slideshow">
  <div class="slide" style="background-image:url('img1.jpg')"></div>
  <div class="slide" style="background-image:url('img2.jpg')"></div>
  <div class="slide" style="background-image:url('img3.jpg')"></div>
  <div class="slide" style="background-image:url('img4.jpg')"></div>
  <div class="slide" style="background-image:url('img5.jpg')"></div>
</div>

<audio id="bgm" preload="auto" loop>
  <source src="./song.mp3" type="audio/mpeg">
</audio>

<div class="card" id="card">
  <h1>Diva ‚ù§Ô∏è</h1>
  <p>After 2 beautiful years‚Ä¶ will you be my Valentine?</p>

  <div class="btns">
    <button id="yes">Yes, always üíò</button>
    <button id="no">No üòÖ</button>
  </div>

  <div class="test-audio">
    <div>Music test (should work if the file is hosted correctly):</div>
    <audio controls preload="none" src="./song.mp3"></audio>
    <a href="./song.mp3" target="_blank" rel="noopener">Open song.mp3 directly</a>
  </div>

  <div id="msg"></div>
</div>

<div class="final-line" id="finalLine">
  Year 3 with Diva‚Ä¶ here we go. ‚ù§Ô∏è
</div>

<script>
const yesBtn = document.getElementById("yes");
const noBtn = document.getElementById("no");
const card = document.getElementById("card");
const slideshow = document.getElementById("slideshow");
const slides = document.querySelectorAll(".slide");
const msg = document.getElementById("msg");
const finalLine = document.getElementById("finalLine");
const bgm = document.getElementById("bgm");

noBtn.addEventListener("mouseenter", () => {
  const pad = 20;
  const maxX = window.innerWidth - noBtn.offsetWidth - pad;
  const maxY = window.innerHeight - noBtn.offsetHeight - pad;
  noBtn.style.position = "fixed";
  noBtn.style.left = Math.random() * maxX + "px";
  noBtn.style.top  = Math.random() * maxY + "px";
});

yesBtn.addEventListener("click", async () => {
  noBtn.style.display = "none";

  slideshow.style.display = "block";
  let i = 0;
  slides[i].classList.add("active");

  setInterval(() => {
    slides[i].classList.remove("active");
    i = (i + 1) % slides.length;
    slides[i].classList.add("active");
  }, 4000);

  msg.style.display = "block";
  msg.textContent = "I choose you. Today. Tomorrow. Always. üíû";

  try {
    bgm.volume = 0.7;
    await bgm.play();
  } catch (e) {
    console.error("Audio blocked or file missing:", e);
    alert("Music didn't load. Your song.mp3 is not being served correctly by GitHub Pages (wrong name/path or Pages folder).");
  }

  setTimeout(() => { card.style.opacity = "0"; }, 2500);
  setTimeout(() => { card.style.display = "none"; }, 3700);
  setTimeout(() => { finalLine.style.opacity = "1"; }, 4500);
});
</script>

</body>
</html>
